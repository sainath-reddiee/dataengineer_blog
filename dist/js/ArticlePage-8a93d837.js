import{_ as k,j as e}from"../assets/index-a79bb1eb.js";import{R as h,f as S,r as j,L as b,h as D}from"./chunk-966c10cc.js";import{M as L,B as o}from"./chunk-6f76428b.js";import{a as C}from"./chunk-61f23efc.js";import{m as p,e as y,k as E,l as I,n as _,o as w,R as P,p as A}from"./chunk-84f5b8d2.js";import"./chunk-4a921aab.js";const R={},f=h.lazy(()=>k(()=>import("./AdPlacement-3f52b50c.js"),["js/AdPlacement-3f52b50c.js","assets/index-a79bb1eb.js","js/chunk-966c10cc.js","css/index-49d65887.css"])),v=({error:s,onRetry:g,slug:n})=>{var a,c;const i=D(),d=t=>t?typeof t=="string"?t:t.message?t.message.includes("not found")?'Article "'.concat(n,'" was not found. It may have been moved or deleted.'):t.message.includes("Network")?"Unable to connect to the server. Please check your internet connection.":t.message.includes("timeout")?"The request took too long. Please try again.":t.message:"Failed to load the article. Please try again.":"An unknown error occurred",l=((a=s==null?void 0:s.message)==null?void 0:a.includes("not found"))||((c=s==null?void 0:s.message)==null?void 0:c.includes("404"));return e.jsx("div",{className:"pt-4 pb-12",children:e.jsxs("div",{className:"container mx-auto px-6 max-w-4xl",children:[e.jsx(p.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},transition:{duration:.5},className:"mb-4",children:e.jsx(o,{asChild:!0,variant:"outline",className:"border-2 border-blue-400/50 text-blue-300 hover:bg-blue-500/20 backdrop-blur-sm",children:e.jsxs(b,{to:"/articles",children:[e.jsx(y,{className:"mr-2 h-4 w-4"}),"All Articles"]})})}),e.jsxs(p.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.1},className:"flex flex-col items-center justify-center py-20 text-center",children:[e.jsxs("div",{className:"mb-6",children:[e.jsx(w,{className:"h-16 w-16 text-red-400 mx-auto mb-4"}),e.jsx("h1",{className:"text-2xl md:text-3xl font-bold mb-4 text-red-400",children:l?"Article Not Found":"Error Loading Article"})]}),e.jsxs("div",{className:"max-w-md space-y-4",children:[e.jsx("p",{className:"text-gray-400 leading-relaxed",children:d(s)}),!l&&e.jsxs("div",{className:"flex flex-col sm:flex-row gap-3 justify-center",children:[e.jsxs(o,{onClick:g,className:"bg-blue-600 hover:bg-blue-700 text-white",children:[e.jsx(P,{className:"mr-2 h-4 w-4"}),"Try Again"]}),e.jsx(o,{variant:"outline",onClick:()=>i("/articles"),className:"border-gray-600 text-gray-300 hover:bg-gray-800",children:"Browse Articles"})]}),l&&e.jsxs("div",{className:"space-y-3",children:[e.jsx(o,{onClick:()=>i("/articles"),className:"bg-blue-600 hover:bg-blue-700 text-white",children:"Browse All Articles"}),e.jsx("p",{className:"text-sm text-gray-500",children:"Looking for something specific? Try searching our articles."})]})]}),R.env.DEV&&e.jsxs("details",{className:"mt-8 text-left max-w-lg",children:[e.jsx("summary",{className:"text-sm text-gray-500 cursor-pointer",children:"Debug Info"}),e.jsx("pre",{className:"text-xs text-gray-600 mt-2 p-3 bg-gray-900 rounded overflow-auto",children:JSON.stringify({slug:n,error:s==null?void 0:s.toString()},null,2)})]})]})]})})},T=()=>e.jsx("div",{className:"pt-4 pb-12",children:e.jsxs("div",{className:"container mx-auto px-6 max-w-4xl",children:[e.jsx(p.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},transition:{duration:.5},className:"mb-4",children:e.jsx(o,{asChild:!0,variant:"outline",className:"border-2 border-blue-400/50 text-blue-300 hover:bg-blue-500/20 backdrop-blur-sm",children:e.jsxs(b,{to:"/articles",children:[e.jsx(y,{className:"mr-2 h-4 w-4"}),"All Articles"]})})}),e.jsx("div",{className:"flex items-center justify-center py-20",children:e.jsxs("div",{className:"flex flex-col items-center space-y-4",children:[e.jsxs("div",{className:"relative",children:[e.jsx(A,{className:"h-8 w-8 animate-spin text-blue-400"}),e.jsx("div",{className:"absolute inset-0 h-8 w-8 border-4 border-purple-400 border-b-transparent rounded-full animate-spin",style:{animationDirection:"reverse",animationDuration:"1s"}})]}),e.jsx("p",{className:"text-gray-400",children:"Loading article..."}),e.jsxs("div",{className:"flex space-x-1",children:[e.jsx("div",{className:"w-2 h-2 bg-blue-400 rounded-full animate-bounce"}),e.jsx("div",{className:"w-2 h-2 bg-purple-400 rounded-full animate-bounce",style:{animationDelay:"0.1s"}}),e.jsx("div",{className:"w-2 h-2 bg-pink-400 rounded-full animate-bounce",style:{animationDelay:"0.2s"}})]})]})})]})}),U=({src:s,alt:g,className:n})=>{const[a,c]=h.useState(!1),[i,d]=h.useState(null),[l,t]=h.useState(!1);return h.useEffect(()=>{if(!s){t(!0);return}const m=new Image,x=window.innerWidth<=768;let r=s;try{const u=new URL(s);x&&!s.includes("unsplash.com")&&(r=s.replace(/w=\d+/,"w=400").replace(/h=\d+/,"h=300"))}catch(u){}m.onload=()=>{d(r),c(!0)},m.onerror=()=>{if(r!==s){const u=new Image;u.onload=()=>{d(s),c(!0)},u.onerror=()=>{t(!0)},u.src=s}else t(!0)},m.src=r},[s]),l?e.jsxs("div",{className:"relative ".concat(n," bg-gradient-to-br from-slate-800 to-slate-700 flex items-center justify-center"),children:[e.jsxs("div",{className:"text-gray-500 text-center",children:[e.jsx(w,{className:"h-8 w-8 mx-auto mb-2"}),e.jsx("span",{className:"text-sm",children:"Image not available"})]}),e.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-slate-900 via-slate-900/50 to-transparent"})]}):e.jsxs("div",{className:"relative ".concat(n),children:[!a&&e.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-slate-800 via-slate-700 to-slate-800 animate-pulse rounded-2xl flex items-center justify-center",children:e.jsx(A,{className:"h-8 w-8 animate-spin text-blue-400"})}),i&&e.jsx("img",{className:"w-full h-full object-cover transition-opacity duration-300 ".concat(a?"opacity-100":"opacity-0"),alt:g||"Article image",src:i,loading:"lazy",decoding:"async",sizes:"(max-width: 768px) 100vw, (max-width: 1200px) 80vw, 70vw",style:{contentVisibility:"auto",containIntrinsicSize:"800px 400px"},onError:()=>t(!0)}),e.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-slate-900 via-slate-900/50 to-transparent"})]})},N=()=>e.jsx("div",{className:"h-32 bg-gradient-to-r from-slate-800 via-slate-700 to-slate-800 animate-pulse rounded-lg flex items-center justify-center",children:e.jsx("span",{className:"text-gray-500 text-sm",children:"Advertisement"})}),V=()=>{const{slug:s}=S(),[g,n]=j.useState(0),{post:a,loading:c,error:i,refetch:d}=C(s);j.useEffect(()=>{!s||typeof s!="string"||s.trim()},[s]);const l=()=>{n(x=>x+1),d()};if(c)return e.jsx(T,{});if(i)return e.jsx(v,{error:i,onRetry:l,slug:s});if(!a)return e.jsx(v,{error:"Post not found",onRetry:l,slug:s});const t={id:a.id||"unknown",title:a.title||"Untitled",excerpt:a.excerpt||"",content:a.content||"<p>Content not available</p>",category:a.category||"Uncategorized",author:a.author||"DataEngineer Hub",date:a.date||new Date().toISOString(),readTime:a.readTime||"1 min read",image:a.image||"https://images.unsplash.com/photo-1595872018818-97555653a011?w=800&h=600&fit=crop"},m=x=>{try{const r=new Date(x);return isNaN(r.getTime())?new Date().toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"}):r.toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"})}catch(r){return new Date().toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"})}};return e.jsxs("div",{className:"pt-4 pb-12",children:[e.jsx(L,{title:t.title,description:t.excerpt,image:t.image,type:"article"}),e.jsxs("div",{className:"container mx-auto px-6 max-w-4xl",children:[e.jsx(p.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},transition:{duration:.5},className:"mb-4",children:e.jsx(o,{asChild:!0,variant:"outline",className:"border-2 border-blue-400/50 text-blue-300 hover:bg-blue-500/20 backdrop-blur-sm",children:e.jsxs(b,{to:"/articles",children:[e.jsx(y,{className:"mr-2 h-4 w-4"}),"All Articles"]})})}),e.jsxs(p.article,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.1},className:"space-y-8",children:[e.jsxs("div",{className:"relative",children:[e.jsx(U,{src:t.image,alt:t.title,className:"w-full h-64 md:h-96 rounded-2xl overflow-hidden"}),e.jsx("div",{className:"absolute inset-0 flex items-end p-6 md:p-8",children:e.jsxs("div",{className:"space-y-4 text-white",children:[e.jsx("div",{className:"inline-block px-3 py-1 bg-blue-600/80 backdrop-blur-sm rounded-full text-sm font-medium",children:t.category}),e.jsx("h1",{className:"text-2xl md:text-4xl lg:text-5xl font-bold leading-tight",children:t.title}),e.jsxs("div",{className:"flex flex-wrap items-center gap-4 text-sm text-gray-300",children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(E,{className:"h-4 w-4"}),e.jsx("span",{children:t.author})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(I,{className:"h-4 w-4"}),e.jsx("span",{children:m(t.date)})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(_,{className:"h-4 w-4"}),e.jsx("span",{children:t.readTime})]})]})]})})]}),e.jsx(j.Suspense,{fallback:e.jsx(N,{}),children:e.jsx(f,{position:"article-top"})}),e.jsx("div",{className:"prose prose-invert prose-lg max-w-none",children:e.jsx("div",{dangerouslySetInnerHTML:{__html:t.content},className:"article-content"})}),e.jsx(j.Suspense,{fallback:e.jsx(N,{}),children:e.jsx(f,{position:"article-bottom"})}),e.jsx("div",{className:"border-t border-gray-800 pt-8",children:e.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("p",{className:"text-gray-400",children:"Published by"}),e.jsx("p",{className:"font-semibold text-white",children:t.author})]}),e.jsx(o,{asChild:!0,className:"bg-blue-600 hover:bg-blue-700 text-white",children:e.jsx(b,{to:"/articles",children:"Read More Articles"})})]})})]})]})]})};export{V as default};
