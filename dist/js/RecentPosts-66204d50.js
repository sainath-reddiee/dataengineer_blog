import{j as e}from"../assets/index-83fb97f8.js";import{r as x}from"./chunk-f6b04eec.js";import{B as g,t as j}from"./chunk-b18a1e6b.js";import{P as v,a as N}from"./chunk-91ea9b29.js";import{w as d}from"./chunk-b40f0e2e.js";import{m as h,l as w,R as b}from"./chunk-1820e378.js";var P=(s,p,r)=>new Promise((i,c)=>{var m=t=>{try{o(r.next(t))}catch(l){c(l)}},u=t=>{try{o(r.throw(t))}catch(l){c(l)}},o=t=>t.done?i(t.value):Promise.resolve(t.value).then(m,u);o((r=r.apply(s,p)).next())});const A=({category:s=null,showCategoryError:p=!1,limit:r=6,title:i="Recent Posts"})=>{const[c,m]=x.useState([]),[u,o]=x.useState(!0),[t,l]=x.useState(null),y=()=>P(void 0,null,function*(){try{l(null),o(!0);let a;if(s)try{const n=yield d.getCategoryIdBySlug(s);a=yield d.getPostsByCategory(n,{per_page:r})}catch(n){if(p){l('Category "'.concat(s,'" not found. Please check if the category exists in WordPress.')),m([]);return}a={posts:[]}}else a=yield d.getPosts({per_page:r});m(a.posts)}catch(a){l(a.message)}finally{o(!1)}}),f=()=>{d.clearCache(),y(),j({title:"Refreshing posts...",description:"Loading latest content"})};return x.useEffect(()=>{s&&(d.clearCache("posts"),d.clearCache("categories")),y()},[s,r]),u?e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"flex items-center justify-between",children:e.jsx("h2",{className:"text-2xl font-bold gradient-text",children:i})}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:Array.from({length:r},(a,n)=>e.jsx(v,{},n))})]}):t?e.jsxs("div",{className:"space-y-6",children:[e.jsx("h2",{className:"text-2xl font-bold gradient-text",children:i}),e.jsxs(h.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"bg-red-500/10 border border-red-500/20 rounded-lg p-6 text-center",children:[e.jsx(w,{className:"h-12 w-12 text-red-400 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-semibold text-red-300 mb-2",children:s?'Category "'.concat(s,'" Issue'):"Failed to Load Posts"}),e.jsx("p",{className:"text-red-200/80 mb-4",children:t}),e.jsxs(g,{onClick:f,variant:"outline",className:"border-red-400/50 text-red-300 hover:bg-red-500/20",children:[e.jsx(b,{className:"h-4 w-4 mr-2"}),"Try Again"]})]})]}):c.length===0?e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"flex items-center justify-between",children:e.jsx("h2",{className:"text-2xl font-bold gradient-text",children:i})}),e.jsxs(h.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"bg-yellow-500/10 border border-yellow-500/20 rounded-lg p-8 text-center",children:[e.jsx("h3",{className:"text-lg font-semibold text-yellow-300 mb-2",children:s?'No posts found in "'.concat(s,'" category'):"No posts available"}),e.jsx("p",{className:"text-yellow-200/80 mb-4",children:s?"This category exists but has no published posts yet. Try publishing a post with relevant keywords.":"No posts have been published yet."})]})]}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h2",{className:"text-2xl font-bold gradient-text",children:i}),e.jsxs(g,{onClick:f,variant:"outline",size:"sm",className:"border-blue-400/50 text-blue-300 hover:bg-blue-500/20",children:[e.jsx(b,{className:"h-4 w-4 mr-2"}),"Refresh"]})]}),e.jsx(h.div,{initial:{opacity:0},animate:{opacity:1},transition:{duration:.3},className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:c.map((a,n)=>e.jsx(h.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:n*.1},children:e.jsx(N,{post:a})},a.id))})]})};export{A as default};
