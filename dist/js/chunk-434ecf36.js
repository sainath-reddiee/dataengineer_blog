var P=(o,c,e)=>new Promise((n,l)=>{var u=s=>{try{a(e.next(s))}catch(r){l(r)}},i=s=>{try{a(e.throw(s))}catch(r){l(r)}},a=s=>s.done?n(s.value):Promise.resolve(s.value).then(u,i);a((e=e.apply(o,c)).next())});import{r as t}from"./chunk-f6b04eec.js";import{w as g}from"./chunk-b40f0e2e.js";const L=({page:o=1,per_page:c=10,categorySlug:e=null,search:n=null,featured:l=null,enabled:u=!0}={})=>{const[i,a]=t.useState([]),[s,r]=t.useState(!0),[f,h]=t.useState(null),[I,S]=t.useState(1),[D,m]=t.useState(0),[p,E]=t.useState(!1),w=t.useCallback((y=!1)=>P(void 0,null,function*(){if(!u){r(!1);return}try{h(null),y||r(!0);let C=null;if(e)try{C=yield g.getCategoryIdBySlug(e)}catch(k){throw new Error('Category "'.concat(e,'" not found. Please check if the category exists.'))}y&&g.clearCache();const d=yield g.getPosts({page:o,per_page:c,categoryId:C,search:n,featured:l});a(d.posts),S(d.totalPages),m(d.totalPosts),E(o<d.totalPages)}catch(C){h(C.message),a([]),S(1),m(0),E(!1)}finally{r(!1)}}),[o,c,e,n,l,u]),b=t.useCallback(()=>P(void 0,null,function*(){yield w(!0)}),[w]),M=t.useCallback(()=>P(void 0,null,function*(){if(!(s||!p))try{r(!0);let y=null;e&&(y=yield g.getCategoryIdBySlug(e));const C=o+1,d=yield g.getPosts({page:C,per_page:c,categoryId:y,search:n,featured:l});a(k=>[...k,...d.posts]),E(C<d.totalPages)}catch(y){h(y.message)}finally{r(!1)}}),[o,c,e,n,l,s,p]);return t.useEffect(()=>{w()},[w]),{posts:i,loading:s,error:f,totalPages:I,totalPosts:D,hasMore:p,refresh:b,loadMore:M,refetch:w}},v=(o,c=!0)=>{const[e,n]=t.useState(null),[l,u]=t.useState(!0),[i,a]=t.useState(null),s=t.useCallback((f=!1)=>P(void 0,null,function*(){if(!c||!o){u(!1);return}try{a(null),f||u(!0),f&&g.clearCache("posts?slug=".concat(o));const h=yield g.getPostBySlug(o);n(h)}catch(h){a(h.message),n(null)}finally{u(!1)}}),[o,c]),r=t.useCallback(()=>P(void 0,null,function*(){yield s(!0)}),[s]);return t.useEffect(()=>{s()},[s]),{post:e,loading:l,error:i,refresh:r}},T=(o=!0)=>{const[c,e]=t.useState([]),[n,l]=t.useState(!0),[u,i]=t.useState(null),a=t.useCallback((r=!1)=>P(void 0,null,function*(){if(!o){l(!1);return}try{i(null),r||l(!0),r&&g.clearCache("categories");const f=yield g.getCategories();e(f)}catch(f){i(f.message),e([])}finally{l(!1)}}),[o]),s=t.useCallback(()=>P(void 0,null,function*(){yield a(!0)}),[a]);return t.useEffect(()=>{a()},[a]),{categories:c,loading:n,error:u,refresh:s}};export{v as a,T as b,L as u};
