import{j as e}from"../assets/index-4f828209.js";import{r}from"./chunk-966c10cc.js";import{B as x,t as D}from"./chunk-cea607c5.js";import{P as A,a as G}from"./chunk-7d44d8be.js";import{w as u}from"./chunk-4a921aab.js";import{w as E,x as B,m as N,o as H,R as M,y as W}from"./chunk-84f5b8d2.js";var Y=(s,v,i)=>new Promise((m,g)=>{var p=t=>{try{n(i.next(t))}catch(h){g(h)}},o=t=>{try{n(i.throw(t))}catch(h){g(h)}},n=t=>t.done?m(t.value):Promise.resolve(t.value).then(p,o);n((i=i.apply(s,v)).next())});const V=({category:s=null,showCategoryError:v=!1,initialLimit:i=6,title:m="Recent Posts",showLoadMore:g=!0,showViewToggle:p=!1})=>{const[o,n]=r.useState([]),[t,h]=r.useState(!0),[f,R]=r.useState(!1),[$,w]=r.useState(null),[P,C]=r.useState(!1),[F,k]=r.useState(1),[L,_]=r.useState(0),[d,b]=r.useState("grid"),j=i,S=(c=1,l=!1)=>Y(void 0,null,function*(){try{w(null),l?R(!0):h(!0);let a;if(s)try{const y=yield u.getCategoryIdBySlug(s);a=yield u.getPostsByCategory(y,{page:c,per_page:j})}catch(y){if(v){w('Category "'.concat(s,'" not found. Please check if the category exists in WordPress.')),n([]),_(0),C(!1);return}a={posts:[],totalPosts:0,totalPages:0}}else a=yield u.getPosts({page:c,per_page:j});n(l?y=>[...y,...a.posts]:a.posts),_(a.totalPosts||0),k(c);const T=l?o.length+a.posts.length:a.posts.length;C(T<(a.totalPosts||0))}catch(a){w(a.message)}finally{h(!1),R(!1)}}),I=()=>{!f&&P&&S(F+1,!0)},z=()=>{u.clearCache(),k(1),S(1,!1),D({title:"Refreshing posts...",description:"Loading latest content"})};return r.useEffect(()=>{s&&(u.clearCache("posts"),u.clearCache("categories")),k(1),n([]),C(!1),S(1,!1)},[s,j]),t&&o.length===0?e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h2",{className:"text-2xl font-bold gradient-text",children:m}),p&&e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(x,{variant:"outline",size:"sm",onClick:()=>b("grid"),className:d==="grid"?"bg-blue-600 text-white":"border-blue-400/50 text-blue-300 hover:bg-blue-500/20",children:e.jsx(E,{className:"h-4 w-4"})}),e.jsx(x,{variant:"outline",size:"sm",onClick:()=>b("list"),className:d==="list"?"bg-blue-600 text-white":"border-blue-400/50 text-blue-300 hover:bg-blue-500/20",children:e.jsx(B,{className:"h-4 w-4"})})]})]}),e.jsx("div",{className:"grid gap-6 ".concat(d==="list"?"grid-cols-1":"grid-cols-1 md:grid-cols-2 lg:grid-cols-3"),children:Array.from({length:i},(c,l)=>e.jsx(A,{},l))})]}):$?e.jsxs("div",{className:"space-y-6",children:[e.jsx("h2",{className:"text-2xl font-bold gradient-text",children:m}),e.jsxs(N.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"bg-red-500/10 border border-red-500/20 rounded-lg p-6 text-center",children:[e.jsx(H,{className:"h-12 w-12 text-red-400 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-semibold text-red-300 mb-2",children:s?'Category "'.concat(s,'" Issue'):"Failed to Load Posts"}),e.jsx("p",{className:"text-red-200/80 mb-4",children:$}),e.jsxs(x,{onClick:z,variant:"outline",className:"border-red-400/50 text-red-300 hover:bg-red-500/20",children:[e.jsx(M,{className:"h-4 w-4 mr-2"}),"Try Again"]})]})]}):o.length===0&&!t?e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"flex items-center justify-between",children:e.jsx("h2",{className:"text-2xl font-bold gradient-text",children:m})}),e.jsxs(N.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"bg-yellow-500/10 border border-yellow-500/20 rounded-lg p-8 text-center",children:[e.jsx("h3",{className:"text-lg font-semibold text-yellow-300 mb-2",children:s?'No posts found in "'.concat(s,'" category'):"No posts available"}),e.jsx("p",{className:"text-yellow-200/80 mb-4",children:s?"This category exists but has no published posts yet. Try publishing a post with relevant keywords.":"No posts have been published yet."})]})]}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between flex-wrap gap-4",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("h2",{className:"text-2xl font-bold gradient-text",children:m}),L>0&&e.jsxs("span",{className:"text-sm text-gray-400 bg-gray-800/50 px-3 py-1 rounded-full",children:[o.length," of ",L," posts"]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[p&&e.jsxs("div",{className:"flex items-center space-x-2 mr-2",children:[e.jsx(x,{variant:"outline",size:"sm",onClick:()=>b("grid"),className:d==="grid"?"bg-blue-600 text-white":"border-blue-400/50 text-blue-300 hover:bg-blue-500/20",children:e.jsx(E,{className:"h-4 w-4"})}),e.jsx(x,{variant:"outline",size:"sm",onClick:()=>b("list"),className:d==="list"?"bg-blue-600 text-white":"border-blue-400/50 text-blue-300 hover:bg-blue-500/20",children:e.jsx(B,{className:"h-4 w-4"})})]}),e.jsxs(x,{onClick:z,variant:"outline",size:"sm",className:"border-blue-400/50 text-blue-300 hover:bg-blue-500/20",disabled:t,children:[e.jsx(M,{className:"h-4 w-4 mr-2 ".concat(t?"animate-spin":"")}),"Refresh"]})]})]}),e.jsx(N.div,{initial:{opacity:0},animate:{opacity:1},transition:{duration:.3},className:"grid gap-6 ".concat(d==="list"?"grid-cols-1":"grid-cols-1 md:grid-cols-2 lg:grid-cols-3"),children:o.map((c,l)=>e.jsx(N.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:l*.05},children:e.jsx(G,{post:c})},c.id))}),g&&P&&e.jsx("div",{className:"flex justify-center pt-8",children:e.jsx(x,{onClick:I,disabled:f,className:"bg-gradient-to-r from-blue-600 to-purple-600 hover:from-blue-700 hover:to-purple-700 text-white px-8 py-3 rounded-full font-medium transition-all duration-300 transform hover:scale-105",children:f?e.jsxs(e.Fragment,{children:[e.jsx(M,{className:"h-4 w-4 mr-2 animate-spin"}),"Loading more..."]}):e.jsxs(e.Fragment,{children:[e.jsx(W,{className:"h-4 w-4 mr-2"}),"Load More Posts"]})})}),f&&e.jsx("div",{className:"grid gap-6 ".concat(d==="list"?"grid-cols-1":"grid-cols-1 md:grid-cols-2 lg:grid-cols-3"),children:Array.from({length:Math.min(j,3)},(c,l)=>e.jsx(A,{},"loading-".concat(l)))}),!P&&o.length>i&&e.jsx("div",{className:"text-center py-8",children:e.jsxs("div",{className:"inline-flex items-center space-x-2 text-gray-400 bg-gray-800/30 px-4 py-2 rounded-full",children:[e.jsx("span",{className:"w-2 h-2 bg-gray-400 rounded-full"}),e.jsx("span",{className:"text-sm",children:"You've reached the end of the posts"}),e.jsx("span",{className:"w-2 h-2 bg-gray-400 rounded-full"})]})})]})};export{V as default};
