import{r as e}from"./vendor-BIicUdBT.js";import{w as a}from"./wordpressApi-Dpnff-oM.js";const t=({page:t=1,per_page:s=10,categorySlug:l=null,search:r=null,featured:o=null,enabled:c=!0}={})=>{const[u,n]=e.useState([]),[g,i]=e.useState(!0),[f,y]=e.useState(null),[h,p]=e.useState(1),[S,d]=e.useState(0),[C,w]=e.useState(!1),P=e.useCallback(async(e=!1)=>{if(c)try{y(null),e||i(!0);let c=null;if(l)try{c=await a.getCategoryIdBySlug(l)}catch(u){throw new Error(`Category "${l}" not found. Please check if the category exists.`)}e&&a.clearCache();const g=await a.getPosts({page:t,per_page:s,categoryId:c,search:r,featured:o});n(g.posts),p(g.totalPages),d(g.totalPosts),w(t<g.totalPages)}catch(g){y(g.message),n([]),p(1),d(0),w(!1)}finally{i(!1)}else i(!1)},[t,s,l,r,o,c]),b=e.useCallback(async()=>{await P(!0)},[P]),k=e.useCallback(async()=>{if(!g&&C)try{i(!0);let e=null;l&&(e=await a.getCategoryIdBySlug(l));const c=t+1,u=await a.getPosts({page:c,per_page:s,categoryId:e,search:r,featured:o});n(e=>[...e,...u.posts]),w(c<u.totalPages)}catch(e){y(e.message)}finally{i(!1)}},[t,s,l,r,o,g,C]);return e.useEffect(()=>{P()},[P]),{posts:u,loading:g,error:f,totalPages:h,totalPosts:S,hasMore:C,refresh:b,loadMore:k,refetch:P}},s=(t,s=!0)=>{const[l,r]=e.useState(null),[o,c]=e.useState(!0),[u,n]=e.useState(null),g=e.useCallback(async(e=!1)=>{if(s&&t)try{n(null),e||c(!0),e&&a.clearCache(`posts?slug=${t}`);const s=await a.getPostBySlug(t);r(s)}catch(l){n(l.message),r(null)}finally{c(!1)}else c(!1)},[t,s]),i=e.useCallback(async()=>{await g(!0)},[g]);return e.useEffect(()=>{g()},[g]),{post:l,loading:o,error:u,refresh:i}},l=(t=!0)=>{const[s,l]=e.useState([]),[r,o]=e.useState(!0),[c,u]=e.useState(null),n=e.useCallback(async(e=!1)=>{if(t)try{u(null),e||o(!0),e&&a.clearCache("categories");const t=await a.getCategories();l(t)}catch(s){u(s.message),l([])}finally{o(!1)}else o(!1)},[t]),g=e.useCallback(async()=>{await n(!0)},[n]);return e.useEffect(()=>{n()},[n]),{categories:s,loading:r,error:c,refresh:g}};export{l as a,s as b,t as u};
